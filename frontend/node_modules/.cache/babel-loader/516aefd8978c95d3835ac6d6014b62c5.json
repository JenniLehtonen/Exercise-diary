{"ast":null,"code":"import axios from 'axios';\nconst baseUrlUsers = 'http://localhost:5000/api/users';\nconst baseUrlResults = 'http://localhost:5000/api/results';\n\nconst addWorkout = async (newObject, token, setAppError) => {\n  //Uuden treenin lisääminen\n  const config = {\n    method: 'post',\n    url: baseUrlResults + '/id/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: newObject\n  }; //näihin kohtiin ;?\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    setAppError(\"Virhe treenin lisäämisessä, yritä uudelleen!\");\n    return;\n  }\n\n  ;\n};\n\nconst deleteWorkout = async (workout, token) => {\n  //Treenin poistaminen\n  const config = {\n    method: 'delete',\n    url: baseUrlResults + '/' + workout + '/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: workout\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst editWorkout = async (workout, token, setAppError) => {\n  //Treenin muokkaaminen\n  console.log(workout);\n  const config = {\n    method: 'patch',\n    url: baseUrlResults + '/' + workout + '/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: workout\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst getProfessionalsResults = async token => {\n  //Haetaan ammattilaisten treenit\n  const config = {\n    method: 'get',\n    url: baseUrlResults + '/professionals/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    }\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst getResultsByUser = async (email, token) => {\n  //Haetaan kirjautuneen käyttäjän treenit\n  const config = {\n    method: 'post',\n    url: baseUrlResults + '/own-results/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: email\n  };\n\n  try {\n    let res = await axios(config);\n    console.log(res.data);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst getAmateursResults = async () => {\n  //Haetaan harrastajien treenit\n  const config = {\n    method: 'get',\n    url: baseUrlResults + '/amateurs/',\n    headers: {}\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst register = async (newObject, setError) => {\n  //Rekisteröidytään\n  await axios.post(`${baseUrlUsers}/register/`, newObject).then(response => {\n    return response;\n  }).catch(error => {\n    if (error.response) {\n      let customError = error.response;\n      customError.userMessage = \"Rekisteröityminen epäonnistui\";\n      setError(customError);\n      return error;\n    }\n  });\n};\n\nconst login = async (newObject, setError, login) => {\n  //Kirjaudutaan sisään\n  let res = await axios.post(`${baseUrlUsers}/login/`, newObject).then(response => {\n    console.log(response);\n    login(response.data.token, response.data.email, response.data.firstname, response.data.userType);\n  }).catch(error => {\n    if (error.response) {\n      let customError = error.response;\n      customError.userMessage = \"Käyttäjää ei ole olemassa. Tarkista käyttäjätunnuksesi ja yritä uudelleen!\";\n      setError(customError); //TÄMÄ KOHTA!!\n\n      return error;\n    }\n  });\n};\n\nconst logout = logout => {\n  //Kirjaudutaan ulos\n  logout();\n};\n\nexport { getAmateursResults, getProfessionalsResults, addWorkout, deleteWorkout, editWorkout, register, login, logout, getResultsByUser };","map":{"version":3,"sources":["C:/Users/jenni/Documents/GitHub/harjoitus4-JenniMERN/frontend/src/user/services/user-services.js"],"names":["axios","baseUrlUsers","baseUrlResults","addWorkout","newObject","token","setAppError","config","method","url","headers","Authorization","data","res","error","deleteWorkout","workout","alert","editWorkout","console","log","getProfessionalsResults","getResultsByUser","email","getAmateursResults","register","setError","post","then","response","catch","customError","userMessage","login","firstname","userType","logout"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst baseUrlUsers = 'http://localhost:5000/api/users';\r\nconst baseUrlResults = 'http://localhost:5000/api/results';\r\n\r\nconst addWorkout = async (newObject, token, setAppError) => { //Uuden treenin lisääminen\r\n    const config = {\r\n        method: 'post',\r\n        url: baseUrlResults + '/id/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: newObject\r\n    }//näihin kohtiin ;?\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        setAppError(\"Virhe treenin lisäämisessä, yritä uudelleen!\");\r\n        return;\r\n    };\r\n};\r\n\r\nconst deleteWorkout = async (workout, token) => { //Treenin poistaminen\r\n    const config = {\r\n        method: 'delete',\r\n        url: baseUrlResults + '/' + workout + '/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: workout\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst editWorkout = async (workout, token, setAppError) => { //Treenin muokkaaminen\r\n    console.log(workout);\r\n    const config = {\r\n        method: 'patch',\r\n        url: baseUrlResults + '/' + workout + '/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: workout\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst getProfessionalsResults = async (token) => { //Haetaan ammattilaisten treenit\r\n    const config = {\r\n        method: 'get',\r\n        url: baseUrlResults + '/professionals/',\r\n        headers: {Authorization: 'Bearer ' + token}\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst getResultsByUser = async (email, token) => { //Haetaan kirjautuneen käyttäjän treenit\r\n    const config = {\r\n        method: 'post',\r\n        url: baseUrlResults + '/own-results/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: email\r\n    }\r\n    try {\r\n        \r\n        let res = await axios(config);\r\n        console.log(res.data);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n}\r\n\r\nconst getAmateursResults = async () => { //Haetaan harrastajien treenit\r\n    const config = {\r\n        method: 'get',\r\n        url: baseUrlResults + '/amateurs/',\r\n        headers: {}\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\n\r\nconst register = async (newObject, setError) =>{ //Rekisteröidytään\r\n    await axios.post(`${baseUrlUsers}/register/`, newObject)\r\n    .then(response => {\r\n        return response;\r\n    })\r\n    .catch (error => {\r\n        if(error.response){\r\n            let customError = error.response;\r\n            customError.userMessage = \"Rekisteröityminen epäonnistui\";\r\n            setError(customError);\r\n            return error;\r\n        }\r\n    })\r\n}\r\n\r\nconst login = async (newObject, setError, login) => { //Kirjaudutaan sisään\r\n    let res = await axios.post (`${baseUrlUsers}/login/`, newObject)\r\n    .then(response =>{\r\n        console.log(response);\r\n        login(response.data.token, response.data.email, response.data.firstname, response.data.userType);\r\n    }\r\n    )\r\n    .catch (error => {\r\n        if(error.response){\r\n            let customError = error.response;\r\n            customError.userMessage = \"Käyttäjää ei ole olemassa. Tarkista käyttäjätunnuksesi ja yritä uudelleen!\";\r\n            setError(customError);  //TÄMÄ KOHTA!!\r\n            return error;\r\n        }\r\n    })\r\n}\r\n\r\nconst logout = (logout) => { //Kirjaudutaan ulos\r\n    logout();\r\n}\r\n\r\nexport {getAmateursResults, getProfessionalsResults, addWorkout, deleteWorkout, editWorkout, register, login, logout, getResultsByUser}\r\n"]},"metadata":{},"sourceType":"module"}