{"ast":null,"code":"import axios from 'axios';\nconst baseUrlUsers = 'http://localhost:5000/api/users';\nconst baseUrlResults = 'http://localhost:5000/api/results';\n\nconst getAllResults = async () => {\n  //Kaikkien tulosten hakemiseen tietokannasta\n  const config = {\n    method: 'get',\n    url: baseUrlResults + '/',\n    headers: {},\n    data: {}\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst addWorkout = async (newObject, token) => {\n  //Uuden treenin lisääminen\n  const config = {\n    method: 'post',\n    url: baseUrlResults + '/id/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: newObject\n  }; //näihin kohtiin ;?\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst deleteWorkout = async (workout, token) => {\n  //Treenin poistaminen\n  const config = {\n    method: 'delete',\n    url: baseUrlResults + '/' + workout + '/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: workout\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst editWorkout = async (workout, token) => {\n  //Treenin muokkaaminen\n  console.log(workout);\n  const config = {\n    method: 'patch',\n    url: baseUrlResults + '/' + workout + '/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: workout\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst getProfessionalsResults = async token => {\n  //Haetaan ammattilaisten treenit\n  const config = {\n    method: 'get',\n    url: baseUrlResults + '/professionals/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    }\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst getResultsByUser = async (email, token) => {\n  //Haetaan kirjautuneen käyttäjän treenit\n  const config = {\n    method: 'post',\n    url: baseUrlResults + '/own-results/',\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    data: email\n  };\n\n  try {\n    let res = await axios(config);\n    console.log(res.data);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst getAmateursResults = async () => {\n  //Haetaan harrastajien treenit\n  const config = {\n    method: 'get',\n    url: baseUrlResults + '/amateurs/',\n    headers: {}\n  };\n\n  try {\n    let res = await axios(config);\n    return res.data;\n  } catch (error) {\n    alert(error);\n    return;\n  }\n\n  ;\n};\n\nconst register = async (newObject, setError) => {\n  //Rekisteröidytään\n  await axios.post(`${baseUrlUsers}/register/`, newObject).then(response => {\n    return response;\n  }).catch(error => {\n    if (error.response) {\n      let customError = error.response;\n      customError.userMessage = \"Rekisteröityminen epäonnistui\";\n      setError(customError);\n      return error;\n    }\n  });\n};\n\nconst login = async (newObject, setError, login, setUsertype, setFirstname) => {\n  //Kirjaudutaan sisään\n  let res = await axios.post(`${baseUrlUsers}/login/`, newObject).then(response => {\n    console.log(response);\n    login(response.data.token, response.data.email);\n    setUsertype(response.data.userType);\n    setFirstname(response.data.firstname);\n    /* if (response.data.message===\"Logged in !\"){ //TARVITAANKO TÄTÄ?\r\n         return res.data;\r\n     } else {\r\n         return \"error\";\r\n     }*/\n  }).catch(error => {\n    if (error.response) {\n      let customError = error.response;\n      customError.userMessage = \"Käyttäjää ei ole olemassa. Tarkista käyttäjätunnuksesi ja yritä uudelleen!\";\n      setError(customError);\n      return error;\n    }\n  });\n};\n\nconst logout = (logout, setFirstname, setUsertype) => {\n  //Kirjaudutaan ulos\n  logout();\n  setFirstname(null);\n  setUsertype(null);\n};\n\nexport { getAmateursResults, getProfessionalsResults, addWorkout, getAllResults, deleteWorkout, editWorkout, register, login, logout, getResultsByUser };","map":{"version":3,"sources":["C:/Users/jenni/Documents/GitHub/harjoitus4-JenniMERN/frontend/src/user/services/user-services.js"],"names":["axios","baseUrlUsers","baseUrlResults","getAllResults","config","method","url","headers","data","res","error","alert","addWorkout","newObject","token","Authorization","deleteWorkout","workout","editWorkout","console","log","getProfessionalsResults","getResultsByUser","email","getAmateursResults","register","setError","post","then","response","catch","customError","userMessage","login","setUsertype","setFirstname","userType","firstname","logout"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst baseUrlUsers = 'http://localhost:5000/api/users';\r\nconst baseUrlResults = 'http://localhost:5000/api/results';\r\n\r\nconst getAllResults = async () => {  //Kaikkien tulosten hakemiseen tietokannasta\r\n    const config = {\r\n        method: 'get',\r\n        url: baseUrlResults + '/',\r\n        headers: {},\r\n        data: {}\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst addWorkout = async (newObject, token) => { //Uuden treenin lisääminen\r\n    const config = {\r\n        method: 'post',\r\n        url: baseUrlResults + '/id/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: newObject\r\n    }//näihin kohtiin ;?\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst deleteWorkout = async (workout, token) => { //Treenin poistaminen\r\n    const config = {\r\n        method: 'delete',\r\n        url: baseUrlResults + '/' + workout + '/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: workout\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst editWorkout = async (workout, token) => { //Treenin muokkaaminen\r\n    console.log(workout);\r\n    const config = {\r\n        method: 'patch',\r\n        url: baseUrlResults + '/' + workout + '/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: workout\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst getProfessionalsResults = async (token) => { //Haetaan ammattilaisten treenit\r\n    const config = {\r\n        method: 'get',\r\n        url: baseUrlResults + '/professionals/',\r\n        headers: {Authorization: 'Bearer ' + token}\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\nconst getResultsByUser = async (email, token) => { //Haetaan kirjautuneen käyttäjän treenit\r\n    const config = {\r\n        method: 'post',\r\n        url: baseUrlResults + '/own-results/',\r\n        headers: {Authorization: 'Bearer ' + token},\r\n        data: email\r\n    }\r\n    try {\r\n        \r\n        let res = await axios(config);\r\n        console.log(res.data);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n}\r\n\r\nconst getAmateursResults = async () => { //Haetaan harrastajien treenit\r\n    const config = {\r\n        method: 'get',\r\n        url: baseUrlResults + '/amateurs/',\r\n        headers: {}\r\n    }\r\n    try {\r\n        let res = await axios(config);\r\n        return res.data;\r\n    } catch (error){\r\n        alert(error);\r\n        return;\r\n    };\r\n};\r\n\r\n\r\nconst register = async (newObject, setError) =>{ //Rekisteröidytään\r\n    await axios.post(`${baseUrlUsers}/register/`, newObject)\r\n    .then(response => {\r\n        return response;\r\n    })\r\n    .catch (error => {\r\n        if(error.response){\r\n            let customError = error.response;\r\n            customError.userMessage = \"Rekisteröityminen epäonnistui\";\r\n            setError(customError);\r\n            return error;\r\n        }\r\n    })\r\n}\r\n\r\nconst login = async (newObject, setError, login, setUsertype, setFirstname) => { //Kirjaudutaan sisään\r\n    let res = await axios.post (`${baseUrlUsers}/login/`, newObject)\r\n    .then(response =>{\r\n        console.log(response);\r\n        login(response.data.token, response.data.email);\r\n        setUsertype(response.data.userType);\r\n        setFirstname(response.data.firstname);\r\n       /* if (response.data.message===\"Logged in !\"){ //TARVITAANKO TÄTÄ?\r\n            return res.data;\r\n        } else {\r\n            return \"error\";\r\n        }*/\r\n    }\r\n    )\r\n    .catch (error => {\r\n        if(error.response){\r\n            let customError = error.response;\r\n            customError.userMessage = \"Käyttäjää ei ole olemassa. Tarkista käyttäjätunnuksesi ja yritä uudelleen!\";\r\n            setError(customError);\r\n            return error;\r\n        }\r\n    })\r\n}\r\n\r\nconst logout = (logout, setFirstname, setUsertype) => { //Kirjaudutaan ulos\r\n    logout();\r\n    setFirstname(null);\r\n    setUsertype(null);\r\n}\r\n\r\nexport {getAmateursResults, getProfessionalsResults, addWorkout, getAllResults, deleteWorkout, editWorkout, register, login, logout, getResultsByUser}\r\n"]},"metadata":{},"sourceType":"module"}